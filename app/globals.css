@tailwind base;
@tailwind components;
@tailwind utilities;

/* Define the new color palette */
@layer base {
  :root {
    --background: #fefcf7; /* Warm off-white */
    --foreground: #2c2c2c; /* Charcoal black */
    --accent: #d4a574;     /* Warm sepia/amber */
    --border: #f0ede6;     /* Clean border color */
    /* Re-map existing shadcn/ui variables to the new palette for consistency */
    --primary: var(--accent);
    --primary-foreground: var(--foreground); /* Text on primary should be charcoal black */

    --muted: var(--border); /* Muted background for elements like code blocks */
    --muted-foreground: var(--foreground); /* Muted foreground for text on muted backgrounds */

    --card: var(--background); /* Card background */
    --card-foreground: var(--foreground); /* Card text */

    --popover: var(--background); /* Popover background */
    --popover-foreground: var(--foreground); /* Popover text */

    --secondary: #8b5a3c; /* Darker brown for better contrast than the accent */
    --secondary-foreground: var(--background); /* Light text on secondary */

    --destructive: 0 84.2% 60.2%; /* Keep default destructive */
    --destructive-foreground: 0 0% 98%; /* Keep default destructive foreground */

    --ring: var(--accent); /* Ring color for focus states */

    --radius: 0.5rem; /* Keep default radius */
  }
}

/* Base typography and colors */
html,
body {
  margin: 0;
  padding: 0;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
    "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji",
    "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
  @apply bg-background text-foreground;
}

/* Kanji Stroke Order Animations */
.stroke-animation svg {
  width: 100%;
  height: 100%;
  max-width: 200px;
  max-height: 200px;
}

.stroke-animation path {
  stroke-dasharray: 1000;
  stroke-dashoffset: 1000;
  transition: stroke-dashoffset 0.1s ease;
  stroke: #2c2c2c;
  stroke-width: 2;
  fill: none;
}

.stroke-animation.animate path {
  animation: draw-stroke 0.8s ease-in-out forwards;
}

/* Dynamic stroke order based on KanjiVG stroke order */
.stroke-animation.animate path[id$="s1"] { animation-delay: 0s; }
.stroke-animation.animate path[id$="s2"] { animation-delay: 0.8s; }
.stroke-animation.animate path[id$="s3"] { animation-delay: 1.6s; }
.stroke-animation.animate path[id$="s4"] { animation-delay: 2.4s; }
.stroke-animation.animate path[id$="s5"] { animation-delay: 3.2s; }
.stroke-animation.animate path[id$="s6"] { animation-delay: 4.0s; }
.stroke-animation.animate path[id$="s7"] { animation-delay: 4.8s; }
.stroke-animation.animate path[id$="s8"] { animation-delay: 5.6s; }
.stroke-animation.animate path[id$="s9"] { animation-delay: 6.4s; }
.stroke-animation.animate path[id$="s10"] { animation-delay: 7.2s; }
.stroke-animation.animate path[id$="s11"] { animation-delay: 8.0s; }
.stroke-animation.animate path[id$="s12"] { animation-delay: 8.8s; }
.stroke-animation.animate path[id$="s13"] { animation-delay: 9.6s; }
.stroke-animation.animate path[id$="s14"] { animation-delay: 10.4s; }
.stroke-animation.animate path[id$="s15"] { animation-delay: 11.2s; }
.stroke-animation.animate path[id$="s16"] { animation-delay: 12.0s; }
.stroke-animation.animate path[id$="s17"] { animation-delay: 12.8s; }
.stroke-animation.animate path[id$="s18"] { animation-delay: 13.6s; }
.stroke-animation.animate path[id$="s19"] { animation-delay: 14.4s; }
.stroke-animation.animate path[id$="s20"] { animation-delay: 15.2s; }

@keyframes draw-stroke {
  to {
    stroke-dashoffset: 0;
  }
}

/* Headings using Georgia */
h1, h2, h3, h4, h5, h6 {
  font-family: Georgia, serif;
}

/* Markdown styling for chat interface */
.prose {
  @apply text-foreground;
}

.prose h1, .prose h2, .prose h3, .prose h4, .prose h5, .prose h6 {
  @apply font-bold mb-2 mt-4;
  font-family: Georgia, serif; /* Ensure prose headings also use Georgia */
}

.prose h1 {
  @apply text-2xl;
}

.prose h2 {
  @apply text-xl;
}

.prose h3 {
  @apply text-lg;
}

.prose p {
  @apply mb-2;
}

.prose ul, .prose ol {
  @apply pl-5 mb-2;
}

.prose ul {
  @apply list-disc;
}

.prose ol {
  @apply list-decimal;
}

.prose li {
  @apply mb-1;
}

.prose code {
  @apply bg-muted px-1 py-0.5 rounded text-sm;
  font-family: monospace;
}

.prose pre {
  @apply bg-muted p-3 rounded-md overflow-x-auto mb-2;
}

.prose pre code {
  @apply bg-transparent p-0 text-sm;
}

.prose blockquote {
  @apply border-l-4 border-accent pl-4 italic my-2;
}

.prose a {
  @apply text-primary underline;
}

.prose img {
  @apply max-w-full h-auto rounded-md my-2;
}

.prose table {
  @apply w-full border-collapse mb-2;
}

.prose table th, .prose table td {
  @apply border border-muted p-2;
}

.prose table th {
  @apply bg-muted;
}

.prose hr {
  @apply my-4 border-t border-muted;
}

.prose strong {
  @apply font-bold;
}

.prose em {
  @apply italic;
}

/* Remove specific notebook styles */
.notebook-container,
.date-text,
.journal-input {
  /* Ensure these styles are removed or overridden */
  display: none !important;
}

/* Utility class for notebook foreground color - keep if used elsewhere, otherwise remove */
.text-notebook-foreground {
  color: var(--notebook-foreground); /* This variable is no longer defined in :root */
}
